<!DOCTYPE html>
<html lang="en">

<head>
    <title>Ansible Demo</title>
    <link rel="icon" href="data:image/svg+xml,...">
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <!-- Include Vis.js -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
    
    <div class="container-fluid">
        <!-- First row of four columns -->
        <div class="row border-bottom ">
            <div class="col-md-3 column-border d-flex flex-column">
                <h4>Eventos</h4>
                <!-- Placeholder for content -->
                <div style="height: 400px;"></div>
            </div>
            <div class="col-md-3 column-border d-flex flex-column">
                <h4>Filtro</h4>
                <!-- Placeholder for content -->
                <div style="height: 400px;"></div>
            </div>
            <div class="col-md-3 column-border d-flex flex-column">
                <h4>Playbooks</h4>
                <!-- Placeholder for content -->
                <div style="height: 400px;"></div>
            </div>
            <div class="col-md-3 column-border d-flex flex-column">
                <h4>Sistemas</h4>
                <!-- Placeholder for content -->
                <div style="height: 400px;"></div>
            </div>
        </div>
        <!-- Second row of two columns with different spans -->
        <div class="row">
            <div class="col-md-3 column-border d-flex flex-column">
                <h4>Grafo</h4>
                <!-- Node graph container -->
                <div id="network" style="height: 400px;"></div>
            </div>
            <div class="col-md-9 column-border d-flex flex-column">
                <h4>Business</h4>
                <!-- Placeholder for content -->
                <div style="height: 400px;"></div>
            </div>
        </div>
    </div>
    <script>
        var colors = ['#FFC107', '#03A9F4', '#4CAF50', '#E91E63', '#FFEB3B', '#009688', '#673AB7', '#3F51B5', '#FF5722', '#795548'];
        var numNodes = 200;
        var nodes = new vis.DataSet([]);
        var edges = new vis.DataSet([]);

        var container = document.getElementById('network');
        var data = {
            nodes: nodes,
            edges: edges
        };

        var options = {
            nodes: {
                shape: 'dot',
                size: 10,
                font: {
                    size: 8,
                    color: '#000000'
                },
                borderWidth: 2
            },
            
            
            edges: {
                width: 2,
                color: {
                    color: '#848484',
                    highlight: '#848484',
                    hover: '#848484',
                    opacity: 0.8
                }
            },
            physics: {
                stabilization: { iterations: 150 },
                barnesHut: {
                    gravitationalConstant: -1500,
                    centralGravity: 0.3,
                    springLength: 100,
                    springConstant: 0.01,
                    damping: 0.09,
                    avoidOverlap: 0.1
                },
                solver: 'barnesHut'
            },
            layout: {
                improvedLayout: false
            }
        };

        // Create the network
        var network = new vis.Network(container, data, options);

        // Pre-set zoom out level
        network.once('stabilizationIterationsDone', function() {
            network.fit({
                nodes: nodes.getIds(), 
                scale: 2.0, // Pre-set scale for initial view
                animation: { duration: 500, easingFunction: "easeOutQuad" }
            });
        });

        // Function to add nodes and edges
        var currentIndex = 1;
        var addNode = function() {
            if (currentIndex <= numNodes) {
                nodes.add({id: currentIndex, label: 'Node ' + currentIndex, color: colors[currentIndex % colors.length] });
                if (currentIndex > 1) {
                    edges.add({from: currentIndex - 1, to: currentIndex});
                }
                currentIndex++;
            } else {
                clearInterval(animation); // Stop adding nodes after 100
            }
        };

        // Start animation with a new node every 250 milliseconds
        var animation = setInterval(addNode, 250);
    </script>

</body>

</html>